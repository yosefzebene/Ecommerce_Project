<h1 class="title">Cart</h1>

<% if @cart.empty? %>
    <h1 class="title">Cart is empty</h1>
<% else %>
    <% @cart.each do |product| %>
        <div class="box has-background-light">
            <article class="media">
                <div class="media-left">
                    <figure class="image is-128x128">
                        <% if product.image.attached? %>
                            <%= image_tag product.image.variant(:thumb) %>
                        <% end %>
                    </figure>
                </div>
                <div class="media-content">
                    <div class="content">
                        <h3 class="title is-4"><%= link_to product.name, product_path(product.id), target: '_blank' %></h3> 
                        
                        <br>
                        <strong>Price: </strong>
                        <% if product.discount? %>
                            <s class="has-text-danger"><%= number_to_currency product.price_in_dollar %></s>
                            <%= number_to_currency product.discount_price %>
                        <% else %>
                            <%= number_to_currency product.price_in_dollar %>
                        <% end %>
                    </div>
                    <nav class="level is-mobile">
                        <div class="level-left">
                        <%= link_to 'Remove', remove_from_cart_path(product.id), data: {turbo_method: :delete} %>
                        </div>
                    </nav>
                </div>
            </article>
        </div>
    <% end %>
<% end %>